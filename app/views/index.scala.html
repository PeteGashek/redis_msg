@(message: String)

@main("Welcome to Play") {
    <div class = "container">
        <h4>Messages received:</h4>
        <ul class="list-group" data-bind="foreach: messages">
            <li class="list-group-item small">
                <span class="col-lg-2" data-bind="text: $data.time.toLocaleTimeString()"></span>
                <span class="col-lg-8" data-bind="text: JSON.stringify($data.eventData)"></span>
            </li>
        </ul>
    </div>

    <script type="text/javascript" charset="utf-8">

    console.log("@routes.Application.wsmessage.webSocketURL(request)")

    var ws = new ReconnectingWebSocket("@routes.Application.wsmessage.webSocketURL(request)")
    ws.onmessage = function(event){
            viewModel.eventDispatcher.dispatch(event)
    }

    </script>
}
